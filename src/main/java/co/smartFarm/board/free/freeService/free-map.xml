<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.smartFarm.board.free.freeService.FreeMapper">

    <!-- 전체리스트 -->
    <select id="freeList"
        resultType="co.smartFarm.board.free.freeService.FreeVO">
        SELECT FREE_NO, FREE_TITLE, MEM_NAME, FREE_DAY, FREE_HIT FROM FREE ORDER BY FREE_NO DESC
    </select>

    <!-- 단건조회 -->
    <select id="freeOne"
        resultType="co.smartFarm.board.free.freeService.FreeVO" parameterType="int">
        SELECT * FROM FREE WHERE FREE_NO = #{free_no}
    </select>
    
    <select id="recentlyFree" resultType="co.smartFarm.board.free.freeService.FreeVO">
    SELECT *
	FROM FREE
	ORDER BY FREE_DAY DESC
    </select>
    
   	<insert id="freeInsert" parameterType="co.smartFarm.board.free.freeService.FreeVO">
		<selectKey keyProperty="free_no" resultType="int" order="BEFORE">
			SELECT NVL(MAX(FREE_NO)+1,1) AS FREE_NO FROM FREE
		</selectKey> 
			INSERT INTO FREE(FREE_NO, FREE_TITLE, FREE_CON, MEM_NAME, FREE_HIT, FREE_DAY, FREE_ORI_ROU, FREE_PHY_ROU, MEM_EMAIL)
			VALUES(#{free_no},#{free_title},#{free_con},#{mem_name},0,sysdate,#{free_ori_rou},#{free_phy_rou},#{mem_email})
    </insert>
</mapper>